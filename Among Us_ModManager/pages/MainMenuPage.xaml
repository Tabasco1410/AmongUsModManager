<Page x:Class="Among_Us_ModManager.Pages.MainMenuPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="MainMenuPage">

    <Grid Background="White">

        <!-- ヘッダー -->
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10">
            <TextBlock x:Name="AppTitleText"
                       Text="Among Us ModManager"
                       FontSize="24"
                       FontWeight="Bold"
                       Foreground="Black"
                       VerticalAlignment="Center"/>

            <StackPanel Orientation="Vertical" Margin="10,0,0,0" VerticalAlignment="Bottom">
                <TextBlock x:Name="VersionText"
                           Text="バージョン取得中..."
                           FontSize="12"
                           Foreground="Gray"/>
                <StackPanel Orientation="Horizontal" Margin="0,2,0,0">
                    <TextBlock x:Name="UpdateNoticeText"
                               Text="アップデートがあります！"
                               Foreground="Red"
                               Visibility="Collapsed"
                               VerticalAlignment="Center"/>
                    <Button x:Name="UpdateButton"
                            Style="{StaticResource TextButtonStyle}"
                            Content="アップデート"
                            Click="UpdateButton_Click"
                            Visibility="Collapsed"
                            Height="20"
                            Margin="5,0,0,0"
                            Cursor="Hand"/>
                </StackPanel>
            </StackPanel>
        </StackPanel>

        <!-- 右上ボタン -->
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,10,10,0">

            <!-- 管理者ページボタン -->
            <Button x:Name="AdminPageButton"
                    Style="{StaticResource TextButtonStyle}"
                    Content="管理者ページ"
                    Width="100"
                    Height="40"
                    Margin="0,0,5,0"
                    Click="AdminLogin_Click"
                    Visibility="Collapsed"
                    Cursor="Hand"/>

            <!-- 新しいお知らせ -->
            <StackPanel>
                <TextBlock x:Name="NewNoticeText"
                           Text="新しいお知らせがあります！メニューからお知らせを見て確認してください。"
                           Foreground="Red"
                           Visibility="Collapsed"
                           HorizontalAlignment="Center"
                           FontWeight="Bold"
                           Margin="0,2,0,0"/>
            </StackPanel>

            <Button x:Name="SettingsButton"
        Style="{StaticResource ImageButtonStyle}"
        Width="100"
        Height="40"
        Click="Settings_Click"
        Cursor="Hand">
                <Image Source="pack://application:,,,/Resources/Buttons/Menu_Black.png"/>
            </Button>


        </StackPanel>

        <!-- メイン -->
        <Grid Margin="10,80,10,10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- 新規インストール -->
            <Border Grid.Row="0" BorderBrush="DarkGray" BorderThickness="1" CornerRadius="5" Padding="15" Margin="0,0,0,10">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <Button x:Name="InstallModButton"
                            Style="{StaticResource TextButtonStyle}"
                            Width="150"
                            Height="50"
                            Margin="5"
                            Click="InstallNewMod_Click"
                            Cursor="Hand"
                            Content="Modをインストール"/>
                    <TextBlock x:Name="InstallModDescText"
                               Text="Among Usに新しくModを導入する方・はじめてmodを導入する方はこちらのボタンをクリックしてください。"
                               VerticalAlignment="Center" Margin="15,0,0,0" FontSize="14"/>
                </StackPanel>
            </Border>

            <!-- 導入済み一覧 -->
            <ScrollViewer Grid.Row="1">
                <ItemsControl x:Name="InstallListPanel">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border BorderBrush="Gray" BorderThickness="1" Margin="5" Padding="10">
                                <StackPanel Orientation="Vertical" Margin="5">
                                    <TextBlock Text="{Binding VersionText}" FontWeight="Bold" FontSize="16" Margin="0,0,0,5"/>
                                    <TextBlock Text="{Binding ExePath}" Foreground="Gray" FontSize="13" Margin="0,0,0,10"/>

                                    <WrapPanel>
                                        <Button Style="{StaticResource TextButtonStyle}" Width="80" Height="40" Margin="5" Click="Launch_Click" Cursor="Hand" Content="{Binding LaunchText}"/>
                                        <Button Style="{StaticResource TextButtonStyle}" Width="80" Height="40" Margin="5" Click="OpenFolder_Click" Cursor="Hand" Content="{Binding OpenFolderText}"/>
                                        <Button Style="{StaticResource TextButtonStyle}" Width="120" Height="40" Margin="5" Click="Uninstall_Click" Cursor="Hand" Content="{Binding UninstallText}"/>
                                    </WrapPanel>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Grid>

        <!-- Discord は個別 -->
        <Button x:Name="DiscordIcon" Width="32" Height="32" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,40,20" Click="DiscordIcon_Click" Cursor="Hand">
            <Button.Template>
                <ControlTemplate TargetType="Button">
                    <Image Source="pack://application:,,,/Resources/Discord.png"/>
                </ControlTemplate>
            </Button.Template>
        </Button>

    </Grid>
</Page>
