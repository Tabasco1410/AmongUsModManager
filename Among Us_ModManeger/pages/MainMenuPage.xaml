<Page x:Class="Among_Us_ModManeger.Pages.MainMenuPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="MainMenuPage">

    <Grid Background="White" Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="350" />
        </Grid.ColumnDefinitions>

        <Grid Grid.Row="0" Grid.ColumnSpan="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0"
                       Text="Among Us MOD Manager"
                       FontSize="28"
                       FontWeight="Bold"
                       VerticalAlignment="Top"
                       HorizontalAlignment="Left"/>

            <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Top">
                <Button x:Name="AdminPageButton"
                        Content="管理者ページ"
                        Visibility="Collapsed"
                        Click="AdminLogin_Click"
                        Width="100"
                        Height="30"
                        Margin="0,0,10,0"/>
                <Button x:Name="NoticeBadge"
                        Content="お知らせ"
                        Width="100"
                        Height="30"
                        Click="Notice_Click"/>
                <TextBlock x:Name="NoticeText"
                           Text="新しいお知らせがあります！"
                           Foreground="Red"
                           FontWeight="Bold"
                           VerticalAlignment="Center"
                           Margin="10,0,10,0"
                           Visibility="Collapsed"/>
            </StackPanel>
        </Grid>

        <!-- 「Modを新しく導入する」セクション (元の状態に戻す) -->
        <StackPanel Grid.Row="1" Grid.ColumnSpan="2" Orientation="Horizontal" Margin="0,20,0,20">
            <Button Content="Modを新しく導入する"
                    Width="250"
                    Height="50"
                    FontSize="16"
                    Click="Mod_New_Click"
                    Margin="0,0,20,0"/>
            <TextBlock FontSize="16"
                       VerticalAlignment="Center"
                       TextWrapping="Wrap"
                       Width="400">
                <Run Text="新しくAmong UsにModを導入する方はこちらからどうぞ。"/>
                <LineBreak/>
                <Run Text="Modの.zipファイルをご用意ください。"/>
            </TextBlock>
        </StackPanel>

        <!-- 左側のカラム: Among Usを起動する & 新しいnoteセクション -->
        <StackPanel Grid.Row="2" Grid.Column="0" Margin="0,30,20,0">
            <!-- Among Usを起動するセクション -->
            <TextBlock Text="Among Usを起動する"
                       FontSize="24"
                       FontWeight="Bold"
                       Margin="0,0,0,10"/>
            <Button Content="Among Us.exe を選択"
                    Width="180"
                    Height="30"
                    Margin="0,0,0,10"
                    Click="SelectExeButton_Click"/>
            <ItemsControl x:Name="GameFolderList" Margin="0,0,0,30"/>
            <!-- noteセクションとの間にマージンを追加 -->

            <!-- 新しい「note」セクション -->
            <TextBlock Text="note"
                       FontSize="24"
                       FontWeight="Bold"
                       Margin="0,0,0,10"/>
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <Button Content="note"
                        Width="200"
                        Height="50"
                        FontSize="16"
                        Click="Note_Click"
                        Margin="0,0,20,0"/>
                <!-- TextWrappingとLineBreakを削除し、テキストを単一のRunにまとめる -->
                <TextBlock FontSize="16"
                           VerticalAlignment="Center"
                           ><Run Text="管理者が書いたnoteが載っています。"/><LineBreak/><Run Text="Modの導入の仕方の解説などもあるのでぜひどうぞ。"/></TextBlock>
            </StackPanel>
        </StackPanel>

        <!-- 右側のカラム: Modのアップデート -->
        <StackPanel Grid.Row="2" Grid.Column="1" Margin="0,30,0,0" HorizontalAlignment="Stretch">
            <TextBlock Text="Modのアップデート"
                       FontSize="20"
                       FontWeight="Bold"
                       Margin="0,0,0,10"/>
            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                <TextBlock x:Name="UpdateNoticeText"
                           Text="アップデートがあります！"
                           Foreground="Red"
                           VerticalAlignment="Center"
                           Visibility="Collapsed"
                           Margin="0,0,10,0"/>
                <Button x:Name="UpdateButton"
                        Content="アプリ本体アップデート"
                        Click="UpdateButton_Click"
                        Visibility="Collapsed"/>
            </StackPanel>
            <Button Content="MODアップデートを確認"
                    Width="200"
                    Height="30"
                    Margin="0,0,0,10"
                    Click="ModUpdateCheck_Click"/>
            <!-- ここから追加 -->
            <TextBlock Text="導入済みMOD一覧"
           FontSize="16"
           FontWeight="Bold"
           Margin="0,10,0,5"/>
            <ListBox x:Name="InstalledModsListBox"
         Height="180"
         DisplayMemberPath="Name"/>
            <!-- ここまで追加 -->
        </StackPanel>

        <TextBlock x:Name="VersionText"
                   FontSize="12"
                   Foreground="Gray"
                   Text="バージョン取得中..."
                   HorizontalAlignment="Right"
                   VerticalAlignment="Bottom"
                   Margin="0,0,10,10"
                   Grid.Row="2"
                   Grid.Column="1"/>
    </Grid>
</Page>
